### 1.记得总结各类传输介质还有各类局域网所有的介质

## 第一章
1. 组成上看:计算机网络主要由硬件，软件，协议三大部分组成
2. 工作方式上看:可分为边缘部分和核心部分
3. 功能组成上看:通信子网（传输介质，通信设备，网络协议）和资源子网（软件）组成
4. 广域网是因特网的核心部分
5. 局域网使用广播技术，广域网使用交换技术（即协议不同）
6. 拓扑结构：总线形，星形，环形，网状形网络
7. 网状形结构多用在广域网中
8. 在不考虑传播时延的前提下，k段链路上传播相当于一个流水线，传输时延相当于每一段花的时间
10. 物理层数据单元为比特，链路层成为帧，网络层成为分组，传输车成为报文
11. 不可靠的服务其网络的正确性需要用户去实现
12. OSI参考模型
    - 数据链路层提供差错控制，流量控制和传输管理等
    - 网络层提供流量控制，拥塞控制，差错控制，和网际互连
    - 传输层也称运输层，传输层负责主机中两个进程的通信，功能是为端到端的连接提供可靠的传输服务，传输层的协议有TCP，UDP
13. TCP参考模型
14. TCP和OSI模型的比较：
    - OSI参考模型在**网络层**支持无连接和面向连接的通信，但在传输层仅有面向连接的通信。
    - TCP/IP模型在网络层只有一种面向无连接的通信模式，在传输层支持无连接和面向连接的服务





## 第二章
1. 一条通信线路一般包含一条发送信道和一条接受信道
2. 基带传输：将数字信号直接用0和1两种不同的电压表示，然后送到数字信道上传输。
3. 宽带传输：将基带信号进行调制后形成复用模拟信号，然后传送到模拟信道上传输
4. 码元传输速率：单位时间内传输的码元个数，也可称为**脉冲个数**或者**信号变化次数**，单位是波特Baud
5. 信息传输速率（比特率，信息速率）：表示单位时间内，传输的二进制码元的个数（即比特数），
    - 若一个码元携带n比特的信息量，那么M**波特率**的码元传输速率对应的信息传输速率为Mn
6. **波特率**（码元传输速率）也等于比特率与每符号所含的比特数的比值，也等于**每秒可能发生的信号变化次数**
7. 码元离散电平的数目是指哟多少种不同的码元，比如16种码元，则二进制位数是4位，则数据速率是码元速率的4倍。
8. 香农定理告诉我们：一个码元对应的二进制位数是有限的
9. 调制：数据变化为模拟信号。
10. 编码：数据变化为数字信号
11. 模拟数据可以通过PCM编码器转换成数字信号传输，也可以通过放大器转换为模拟信号传输
12. 数字数据编码位数字信号用于基带传输
    - 归0编码(RZ)，1代表高电平，在时钟周期的中间归0，为双方提供了自同步机制。
    - 非归0编码(NRZ)：和归0一样，只不过中间不归0，双方难以同步，需要时钟线
    - 反向归0编码(NRZI)：信号反转代表0，信号不变代表1。既能传输时钟信号，又能不损失带宽
    - 曼彻斯特编码：前一个间隔为高电平，后一个间隔为低电平代表1，0正好相反。**以太网使用的就是这个**
    - 差分曼彻斯特：**用于局域网传输**
13. 数字数据调制为模拟信号：
    - 幅移键控。频移键控。相移键控。
14. 模拟信号编码为数字信号：三个步骤：采样，量化，编码
15. 电路交换：通化前先建立一条通信线路
    - 通信时延小。有序传输。没有冲突。控制简单
16. 分组交换进一步可分为：
    - 数据报网络：
    - 虚电路网络：发送和接收方建立一条逻辑上的虚电路，通信过程分为：虚电路的建立，数据传输，虚电路释放。
        - 在建立过程中，需要要分配一个没有被使用过的虚电路号；传输数据时还需要带一个虚电路分组号。。
        - 虚电路的传输是双向进行的。
        - 虚电路能保证分组正确有序的到达，还能进行流量控制
        - 致命弱点：当网络中的某个节点被破坏后，所有经过该节点的虚电路会被破坏
17. 计算机内部是并行传输
18. 当告诉某个信号的具体进制的时候，意味着告诉了其离散电平数目，则这时计算其最大数据率的时候需要同时考虑两个公式P42，15题
19. 双绞线是**最常用的**传输介质之一，模拟传输和数字传输都可以用，通信距离一般为几千米到数十千米
20. 同轴电缆：被广泛用于传输较高速率的数据。
    - 50欧同轴电缆主要用于传送基带数字信号
    - 70欧主要用于传送宽带信号，

## 第三章
1. 将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路
2. 数据链路层提供：
    - 无确认的无连接。以太网
    - 有确认的无连接。无线通信
    - 有确认的连接服务。
3. 添头添尾。
4. 数据链路层的流量控制是控制相邻两节点之间数据链路上的流量。
5. 数据链路层提供差错控制服务
6. 组帧：
    - 字符计数法：计数字符提供的字节数包含自身所占用的一个字节
    - 字符填充的首尾定界法：
    - 0比特填充的首位标志法:首尾添加flag，数据中遇见5个1添加一个0
7. CRC：发送方和接收方事先商定一个多项式G(x)，最高位和最低为必须为1
    - 加0.设G(x)的介为r，那么在帧的低位端加r个0。（4位是3阶）
    - 模2除，刚好是异或。然后把余数加到帧的后面r位即可。
8. 纠错编码（海明码）
    - 内容太多，看P72
9. 海明码：纠错d位，需要码距为2d+1的编码方案。检错d位，需要d+1的码距
10. 流量控制（这块看mooc或者自顶向下rdt那块）
11. 数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的
12. 可靠传输
    - 确认和超时重传
    - 重传
        - 停等协议，后退N帧协议，选择重传
        - 后退N帧协议：接收方只允许按顺序接受帧
            - 接受窗口大小为1
            - 若采用n比特对帧编号，则发送窗口尺寸应满足1<=W<=2^n-1.
13. 选择重传SR:
14. 对于GBN来说，窗口大小为n的滑动窗口，最多可以有n-1帧已发送但是没有确认
15. 介质访问控制：
    - 信道划分介质访问控制
        - 频分多路复用
        - 时分多路复用
        - 波分多路复用
        - 码分多路复用 **复用方法要掌握**
    - 随机访问介质访问控制
        - 纯ALOHA：每个站点有数据就发送，如果没哟收到确认，那么在等待一段随机时间之后，再次发送数据
        - 时隙ALOHA：把各站在时间上同步起来，并将时间划分为一段等长的时隙，规定只能在每个时隙开始时才能发送一个帧。
        - CSMA协议（载波侦听多路访问）：
            - 1-坚持CSMA：侦听信道忙后，继续**坚持侦听信道**；侦听到信道空闲后，发送帧的概率为1，即立刻发送数据
            - 非坚持CSMA：首先侦听信道，信道空闲**立刻**发送数据，如果信道忙，那么**放弃侦听**，等待一个随机的事件后再重复上述过程。
            - p-坚持CSMA：首先侦听信道，如果信道忙，**持续侦听**，直到空闲，如果信道空闲，那么以概率p发送数据，以概率1-p推迟到下一个时隙。如果下一个时隙仍然空闲，那么依然以概率p发送。
        - CSMA/CD（半双工）：发送数据首先检测，如果信道空闲就发送数据，同时边发送边检测信道上电压的变化情况，判断其他站点是否发送
            - 如果发生冲突，在中止后采用截断二进制退避算法等待一段时间，然后发送。
            - 以太网规定51.2us是争用期的长度
            - 当重传16次仍不能成功时，就认为网络太拥挤，向上层报告错误
        - 无线网络CSMA/CA：**这里还要去看MOOC**
            - 如果站点最初监听到信道空闲，那么在一个DIFS的短时间间隔后，就发送该帧
            - 如果信道忙，则选取一个随机回退值，并且继续侦听信道，**在信道空闲的时候**递减该值，否则该值不变
            - 当计数值递减为0时，发送整个帧
            - 如果未收到确认，则再次选取一个更大的回退值，重新开始。
        - CSMA/CA解决隐藏终端问题：
            - 短请求发送RTS：指示传输DATA帧和ACK帧的时间
            - 短允许发送CTS：给发送方明确发送的许可，也指示其他站点在预约期间内不要发送
            - 在传输DATA之前，发送方等待DIFS后（前面的过程）首先广播一个RTS帧，然后AP在SIFS后，广播一个CTS，然后双发按照前面的过程传输数据
16. 广域网：范围很广，超过一个城市。广域网不等于互联网。广域网和局域网是等价的概念，不是包含
    - PPP协议是使用串行线路通信的**面向字节**的协议，该协议应用在**直接连接两个节点**的链路上。
    - PPP协议不提供纠错，只提供检错。仅支持点对点，不支持多点线路
    - 只支持全双工链路，PPP协议的两端可以运行不同的网络层协议，但仍然可以使用同一个PPP通信。
    - 没哟流量控制，不存在乱序交付

17. 以太网帧的最小数据为64B，最大为1500B，所以一个以太网帧的数据区域最小长度为46（因为首部和尾部需要18字节）
18. 

## 第四章
1. 距离-向量路由算法：
    - 所有节点定期的将他们**整个路由表**传送给所有与之**直接相邻**的节点
    - 比较常见的是RIP算法
2. 链路状态路由算法
    - 要求每个节点都具有完整的网络拓扑结构信息。
    - 一个节点检查与其所有直接链路的状态，然后将其所得的状态发送给网上的**所有其他节点**，而不是仅发送给其直接相连的节点
    - 常用的是OSPF算法。
    - 只有当链路状态发生变化时，路由器才向所有路由器发送此消息
3. IPv4
    - 首部是：20B固定+一些可选字段和填充
    - 首部长度以**4字节**为单位，最大长度为60B
    - 总长度以**1字节为单位**，最大长度为65535B，以太网最大传送单元为1500B
    - 片偏移**以8字节为单位**，所以每个分片长度一定是8的倍数
    - IP地址的源和目的并不变化，它在转发的时候是根据IP地址找到MAC（ARP协议）地址，修改MAC帧来转发的
4. IPv4地址：
    - ABCD：
        - 主机号全0表示本网络本身。
        - 主机号全1表示本网络的广播地址
        - 127.0.0.0保留为环路自检
        - 0.0.0.0表示本网络上的本主机
        - 32位全1表示整个TCP/IP网络的广播地址，但是因为路由器的隔离，
        - A类中网络号为127(127.xx.yy.zz)的地址是环回测试。
6. NAT，地址转换
    - 普通路由器在转发ip数据报的时候不会改变其源IP地址和目的IP地址，而NAT路由器在转发数据包时，会更换其ip地址
7. 子网划分：
    - 从主机号借用若干比特作为子网号
    - P152，子网划分下的寻址
    - 从一个IP地址本身无法判断主机或者目的主机连接的网络是否进行了子网划分
    - 对分类的IPv4进行**子网划分**的时候，**子网号不能为全0或者全1**
    - 但如果使用CIDR的话，则网络号**可以为**全0或者全1
    - 使用**子网掩码**来表达对分类网络进行了子网划分
    - 路由器在互相交换路由信息的时候，必须把自己所在网络的子网掩码告诉对方
    - 同属于一个子网的主机，路由器，必须设置相同的子网掩码
8. ARP协议工作在**网络层**
    - 每个主机都有一个ARP高速缓冲，用来存放**本局域网**上各台主机和路由器的IP地址和MAC地址的映射表。
    - ARP四种情况P155
9. DHCP动态主机配置协议
    - 是应用层协议，基于UDP的
    1. 需要IP的主机在启动时广播发送**发现报文**，试图找到DHCP服务器
    2. DHCP服务器收到消息后，广播DHCP**提供报文**
    3. 主机收到后，如果接受，那么就广播**DHCP请求**报文
    4. DHCP服务器广播**DHCP确认报文**
    5. 他之所以是应用层协议是因为他是通过客户/服务器方式工作的，应用层协议有两种工作方式：客户机/服务器和P2P方式。
10. IPv6的主要特点：
    - IPv6只有在包的源节点才能分片，传输路径中的路由器不能分片。
    - IPv6的首部长度必须是8B的整数倍
11. 路由协议
    - 外部网关协议
        - EGP：每个自治系统都有一个或多个路由器除了运行本系统的内部路由选择协议外，还需要运行自治系统间的路由选择协议
12. RIP：（看教材）
    - 就是距离向量算法
    - 允许一条路径最多只能包含15个路由器，因此距离等于16时，表示网络不可达。
    - 仅和相邻路由器交换信息
    - 交换的是自己的路由表
    - 按固定的时间间隔交换路由信息
    - **应用层协议**，使用**UDP**传送数据，端口520
13. OSPF：（看教材）
    - 向本系统中所有路由器发送消息，用的是泛洪
    - 发送的是自己与**本路由器相邻**的所有路由器的链路状态。
    - 只有当链路状态发生变化的时候，路由器才用泛洪法向所有路由器发送此消息
    - 是网络层协议，不使用TCP UDP，直接用IP数据报发送
14. BGP边界网关协议：
    - 不同自治系统的路由器之间交换路由信息的协议。
    - 采用的是路径向量路由选择协议（不是链路状态和距离向量）
    - 应用层协议，基于TCP
    - 每个AS至少选择一名BGP发言人与其他自治系统中的BGP发言人要交换路由信息，就要先建立**TCP连接**，然后再次连接基础上建立BGP会话，再利用BGP会话交换路由信息，当BGP发言人交换完信息后，就可以找到到达每个AS的较好路径
    - BGP交换的网络可达性信息就是要到达某个网络所要经过的一系列AS
15. IP组播：一定仅应用于UDP，每个组都有一个特别分配的地址，要给该分组发配就直接给这个地址发送即可，这些地址再D类中分配
    - 只有在传送路径出现分岔时才将分组复制后继续转发
16. 传输层是端到端的服务，网络层是主机到主机的服务
17. 传输层要对收到的报文进行差错检测（首部和数据）。网络层只检查IP数据报得首部，不检验数据部分
18. UDP在IP数据报之上增加了两个基本得服务，复用和分用以及差错检测
19. UDP得头部大小为8B，UDP在计算校验和得时候，会添加12B的伪首部。

## 第四章
1. TCP头部的数据偏移，单位是4B，其实就是头部大小
2. TCP连接过程中，服务器端的资源是在第二次握手的时候分配的，而客户端的资源是在完成第三次握手时分配的。
3. TCP连接释放的时候，FIN报文段不携带数据，但是仍然消耗一个seq
4. TCP的序号建立在字节流之上，而不是报文段
5. TCP默认采用累计确认，只确认正确接受到的最后一个字节。比如收到0-2和5-6，确认号是3
6. 注意在慢开始的阶段，（指数增长阶段），若2cwnd > ssthresh，则cwnd = ssthreash
7. 当在相同的端口建立TCP连接时，第二次建立的连接会失败，不影响先建立连接的传输
8. 新估计RTT = （1-a）*（旧RTT） + a * （新RTT样本）
9. 线路效率等于吞吐率/带宽
10. 









1. 波特率表示信号每秒变化的次数
2. 在数值上，波特率等于比特率与每符号（码元）所含的比特数的比值。
3. 每个信号包含8级，意思就是每个码元的离散电平的数目，比如P42页第13题
4. 若给出了码元与比特数之间的关系，则需受两个公式的共同限制。见P42页15题
5. 4种相位就代表了4种变化，也即4个不同的码元
6. 电路交换不具备差错控制能力，，无法纠正传输过程中发生的数据差错。
7. 分组交换的传输时延比报文交换小。
8. 在出错率很高的线路上，选择数据报方式更好
9. 利用同一根电缆互联主机构成以太网，则主机间的通信方式为**半双工**
10. 当描述一个物理层接口引脚处于高电平的含义时，该描述属于**功能特性**







11. 在连续ARQ中协议中，**发送窗口的大小<=窗口总数-1**
12. 对于回退N协议，发送窗口大小**可以等于窗口总数-1**
13. FDM适合传输模拟信号，TDM适合传说数字信号
14. 计算时隙ALOHA负载：先算出每秒有多少个请求，再算出每秒有多少个时隙，然后一除就是每个时隙有多少请求，也即负载率
15. 纯ALOHA的信道利用率为0.184
16. 快速以太网采用保持最短帧长不变，将最大电缆长度减少到100m的方法。
17. 网桥是连接多个以太网的设备，处理对象是帧，所以工作在数据链路层。
18. 网桥连接的两个网段可以使用不同的协议，网桥可以以目的网络的协议转发帧。
19. 第二层的网络设备可以解决冲突域问题，但是无法解决广播域问题
20. 网络层协议可以不同，比如IPv4和IPv6
21. 静态路由即使是在启动后，用户也可以更改路由表
22. 在距离——向量算法中，慢收敛（坏消息传得慢）最可能导致路由回路的问题
23. 路由选择分为**直接交付**和**间接交付**，如果发送站和目的站在同一个网段内，那么就直接交付，否则就是间接交付，在间接交付中的最后一个路由器一定是直接交付
24. 路由器**总是具有两个或两个以上的ip地址**，路由器的每个端口都有一个不同网络号的ip地址
25. **主机号全0**表示本网络本身
26. **主机号全1**表示本网络的广播地址
27. **网络号为127地址**的IP地址是环回测试地址
28. 划分子网减少了广播域的大小，因为子网号占据了主机号位，所以减少了主机数量，划分子网提高了IP地址的利用率
29. NAT地址转换有保留地址，也就是在内网使用的地址，在P151页的2
30. NAT表项需要管理员添加。
31. 组播：源主机只需要发送**一个分组**，这个分组可以**到达多台主机**
32. 在组播中，主机可以自由的加入某个组或者退出
33. 就是将IPv4或者IPv6的一部分地址空间分配给某这些组，然后目的地址直接填这些组的ip地址即可。IPv4在D类地址空间分配
34. 主机使用**IGMP**协议通知本地网络上的路由器加入某个组。
35. 组播的需要路由器的支持才能实现
36. 组播地址的后23位映射到Mac地址的后23位。

## 路由器
1. 路由器的任务是连接不同的网络（连接异构网络）并完成路由转发。
2. 在同一个网络中传递数据无需路由器的参与，跨网络通信必须通过路由器进行转发
3. 路由器隔离的广播域。属于网络层设备
4. 路由器主要完成：**分组转发**,**路由计算**

## 传输层
### UDP
1. TCP不提供广播或者组播服务，适用于可靠性更重要的场合
2. UDP在IP层之上提供两个服务：多路复用和对数据的错误检查（差错检测），所以可靠性要由上层来提供
3. TCP提供确认，UDP不提供确认。
4. 通信子网没哟传输层
5. UDP用于一次性传输较少数据的网络应用，如DNS，SNMP等。也应用于多媒体如IP电话，视频会议，流媒体。
6. UDP的伪首部大小是12B
7. UDP计算检验和时添加的伪首部和填入的0字节是不发出的
8. 如果不想使用校验和，那么UDP校验和字段全0，如果计算出来的检验和为0，那么该字段为全1
9. 

### TCP
1. TCP是面向字节流的
2. TCP连接的端口是**套接字（端口+Ip地址）**
3. 服务器资源是在第二次握手分配的，而客户机是在第三次握手分配的
4. FIN报文不携带数据，但是也消耗一个序号
5. 流量控制：
    - 传输层：端到端用户之间的流量控制
    - 数据链路层：两个中间的相邻结点的流量控制
    - 数据链路层的窗口大小不能变化，传输层则可以。
6. 发送窗口是由流量控制和拥塞控制共同决定的，即取接收端窗口和拥塞窗口的最小值。
7. TCP是采用了报文段的确认机制
8. 新估计RTT = （1-a）* 旧RTT + a * （新RTT样本）。
    - 新RTT样本就是某一个具体得数据报的RTT

### 应用层
1. DNS协议运行在UDP上，使用53号端口
2. DNF从概念上可分为3层：层次域名空间，域名服务器和解析器
3. 是本地域名服务器替主机查询
4. 